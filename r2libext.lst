   1 * Copyright 2024 Aleksandr Bocharov
   2 * Distributed under the Boost Software License, Version 1.0.
   3 * See accompanying file LICENSE_1_0.txt
   4 * or copy at http://www.boost.org/LICENSE_1_0.txt
   5 * 2024-05-31
   6 * https://github.com/Aleksandr3Bocharov/r2libext
   7 
   8 *====================================================================
   9 * Расширение библиотеки Рефал-2.
  10 * http://www.refal.net/~belous/refal2-r.htm
  11 *====================================================================
  12 
  13 R2LIBEXT    START
  14             EXTRN XOpen, XClose, XGet
  15             ENTRY LoadFile
  16             ENTRY Trim, TrimL, TrimR, WhiteSpaces(WSpaces)
  17             ENTRY Exist, Set
  18             EMPTY True, False
  19 
  20 * <LoadFile SN EF> == (EL)*
  21 LoadFile +
  22     SN EF   = <XOpen 'r' SN EF> +
  23             <DoLoadFile SN <XGet SN>> +
  24             <XClose 'r' SN>
  25 
  26 DoLoadFile +
  27     SN /0/  =
  28     SN EL /0/ +
  29             = (EL)
  30     SN EL   = (EL) <DoLoadFile SN <XGet SN>>
  31 
  32 * <Trim E> == E
  33 Trim +
  34     EL      = <TrimL <TrimR EL>>
  35 
  36 WhiteSpaces S   ' \n\t\v\f\r'
  37 
  38 * <TrimL E> == E
  39 TrimL +
  40     S(:WhiteSpaces:)W EL +
  41             = <TrimL EL>
  42     EL      = EL
  43 
  44 * <TrimR E> == E
  45 TrimR +
  46     EL S(:WhiteSpaces:)W +
  47             = <TrimR EL>
  48     EL      = EL
  49 
  50 * <Exist W E> == /True/ | /False/
  51 Exist +
  52     WS EB WS EE +
  53             = /True/
  54     WS EI   = /False/
  55 
  56 * <Set W*> == W*
  57 Set +
  58     EU WR EB WR EE +
  59             = EU <Set EB WR EE>
  60     EU      = EU
  61 
  62             END
mod_name = R2LIBEXT    mod_length(lines) = 62
                       obj_length(bytes) = 391
